version: '2'
services:
  nginx:
    image: nginx:1.13
    network_mode: host
    volumes:
    - ./nginx.conf:/etc/nginx/conf.d/default.conf:ro
    - ./map.html:/usr/share/nginx/html/index.html:ro
    depends_on:
    - qgis-exec
  qgis-exec:
    image: qgis-exec:latest
    network_mode: host
    volumes:
    - /home/elemoine/src/eleonore/qgis/eleonore:/data:ro
    - /home/elemoine/.pgpass:/home/qgis/.pgpass:ro
    environment:
    - QGIS_OPTIONS_PATH=/data
    - QGIS_PROJECT_FILE=/data/cluster-test.qgs
    - QGIS_SERVER_LOG_LEVEL=0
    - PROCESSES=1
    - DEBUG=1
